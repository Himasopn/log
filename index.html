<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Login - Particle Portal</title>
<style>
  *{box-sizing:border-box;margin:0;padding:0}
  html,body{height:100%;width:100%;background:#000;overflow:hidden;font-family:Inter, system-ui, -apple-system, "Segoe UI", Roboto, sans-serif;color:#fff}
  
  .app {
    position:relative;width:100vw;height:100vh;
    -webkit-tap-highlight-color: transparent;
    touch-action: manipulation;user-select: none;overflow: hidden;
  }

  canvas {
    position:absolute;left:0;top:0;width:100%;height:100%;display:block;z-index:1;
  }

  .login-container {
    position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);
    z-index:10;width:min(420px,90vw);
    background:rgba(15,15,25,0.85);backdrop-filter:blur(20px);
    border-radius:24px;padding:48px 40px;
    box-shadow:0 20px 60px rgba(0,0,0,0.6),0 0 0 1px rgba(255,255,255,0.05);
    opacity:1;transition:opacity 0.4s ease;
  }
  
  .login-container.hide {opacity:0;pointer-events:none;}

  .logo {
    text-align:center;margin-bottom:32px;font-size:36px;
    background:linear-gradient(135deg,#ff6b9d,#c471ed,#12c2e9);
    -webkit-background-clip:text;background-clip:text;
    -webkit-text-fill-color:transparent;font-weight:900;
    letter-spacing:-0.5px;
  }

  .input-group {margin-bottom:20px;}
  
  .input-label {
    display:block;margin-bottom:8px;font-size:13px;
    font-weight:600;color:rgba(255,255,255,0.8);
    text-transform:uppercase;letter-spacing:0.5px;
  }

  .input-field {
    width:100%;padding:14px 18px;border-radius:12px;
    border:1px solid rgba(255,255,255,0.1);
    background:rgba(255,255,255,0.05);color:#fff;
    font-size:15px;transition:all 0.3s ease;
    font-family:inherit;
  }
  
  .input-field:focus {
    outline:none;border-color:#ff6b9d;
    background:rgba(255,255,255,0.08);
    box-shadow:0 0 0 3px rgba(255,107,157,0.15);
  }

  .input-field::placeholder {color:rgba(255,255,255,0.3);}

  .btn-login {
    width:100%;padding:16px;margin-top:28px;
    border:none;border-radius:12px;cursor:pointer;
    background:linear-gradient(135deg,#ff6b9d,#c471ed);
    color:#fff;font-size:15px;font-weight:700;
    text-transform:uppercase;letter-spacing:1px;
    box-shadow:0 8px 24px rgba(255,107,157,0.35);
    transition:all 0.3s ease;
  }
  
  .btn-login:hover {
    transform:translateY(-2px);
    box-shadow:0 12px 32px rgba(255,107,157,0.45);
  }
  
  .btn-login:active {transform:translateY(0);}

  .error-msg {
    margin-top:16px;padding:12px;border-radius:8px;
    background:rgba(255,50,80,0.15);
    border:1px solid rgba(255,50,80,0.3);
    color:#ff6b9d;font-size:13px;text-align:center;
    display:none;
  }
  
  .error-msg.show {display:block;animation:shake 0.5s;}

  @keyframes shake {
    0%,100%{transform:translateX(0)}
    25%{transform:translateX(-10px)}
    75%{transform:translateX(10px)}
  }

  .loading-overlay {
    position:absolute;inset:0;z-index:100;
    background:rgba(0,0,0,0.7);backdrop-filter:blur(4px);
    display:none;align-items:center;justify-content:center;
  }
  
  .loading-overlay.show {display:flex;}

  .loader {
    width:60px;height:60px;border-radius:50%;
    border:5px solid rgba(255,255,255,0.1);
    border-top-color:#ff6b9d;
    animation:spin 1s linear infinite;
  }

  @keyframes spin {to{transform:rotate(360deg)}}

  @media (max-width:480px) {
    .login-container {padding:36px 28px;}
    .logo {font-size:28px;}
  }
</style>
</head>
<body>
  <div class="app">
    <canvas id="canvas"></canvas>
    
    <div class="login-container" id="loginContainer">
      <div class="logo">PARTICLE</div>
      
      <form id="loginForm">
        <div class="input-group">
          <label class="input-label">Username</label>
          <input type="text" class="input-field" id="username" placeholder="Enter username" required autocomplete="off">
        </div>
        
        <div class="input-group">
          <label class="input-label">Password</label>
          <input type="password" class="input-field" id="password" placeholder="Enter password" required>
        </div>
        
        <button type="submit" class="btn-login">Login</button>
        
        <div class="error-msg" id="errorMsg"></div>
      </form>
    </div>

    <div class="loading-overlay" id="loadingOverlay">
      <div class="loader"></div>
    </div>
  </div>

<script>
const VALID_USERS = {
  'AS': 'aurora#15+x=50@ever',
  'MRIG': 'nevermring#19@ever',
  'PRAGYAN': 'paroparo#8080@404',
  'SHAHIL': 'sh#mitochondria@cell'
};

const canvas = document.getElementById('canvas');
const ctx = canvas.getContext('2d');
let DPR = Math.max(1, window.devicePixelRatio || 1);

function setSize() {
  DPR = Math.max(1, window.devicePixelRatio || 1);
  canvas.width = Math.floor(window.innerWidth * DPR);
  canvas.height = Math.floor(window.innerHeight * DPR);
  canvas.style.width = window.innerWidth + 'px';
  canvas.style.height = window.innerHeight + 'px';
  ctx.setTransform(DPR, 0, 0, DPR, 0, 0);
}
setSize();
window.addEventListener('resize', () => { setSize(); rebuildParticles(); });

let particles = [];
let angle = 0;

const NUM_RINGS = 50;
const MIN_PARTICLE_SEP = 4;
const MAX_PARTICLES_LIMIT = 8000;
const RETURN_SPEED = 0.03;

function rebuildParticles() {
  particles = [];
  const w = window.innerWidth;
  const h = window.innerHeight;
  const centerX = w / 2;
  const centerY = h / 2;
  const maxRadius = Math.min(w, h) * 0.28;

  let total = 0;
  const perRing = [];
  for (let r = 0; r < NUM_RINGS; r++) {
    const radius = ((r + 1) / NUM_RINGS) * maxRadius;
    const circumference = 2 * Math.PI * radius;
    const count = Math.max(Math.floor(circumference / MIN_PARTICLE_SEP), 8);
    perRing.push(count);
    total += count;
    if (total > MAX_PARTICLES_LIMIT) break;
  }

  for (let r = 0; r < perRing.length; r++) {
    const radius = ((r + 1) / NUM_RINGS) * maxRadius;
    const count = perRing[r];
    for (let i = 0; i < count; i++) {
      const a = (i / count) * Math.PI * 2;
      const x = centerX + Math.cos(a) * radius;
      const y = centerY + Math.sin(a) * radius;
      const p = {
        x, y,
        size: Math.random() * 0.9 + 0.35,
        color: Math.random() > 0.86 ? '#ff6b9d' : '#ffc0cb',
        radius,
        angleOffset: a,
        centerX, centerY
      };
      particles.push(p);
    }
  }
}
rebuildParticles();

function drawBackground() {
  const w = window.innerWidth, h = window.innerHeight;
  const g = ctx.createRadialGradient(w*0.5,h*0.45,40,w*0.5,h*0.45, Math.max(w,h));
  g.addColorStop(0,'#071926');
  g.addColorStop(0.5,'#001827');
  g.addColorStop(1,'#000');
  ctx.fillStyle = g;
  ctx.fillRect(0,0,w,h);
}

function updateAndDrawParticles() {
  for (let i = 0; i < particles.length; i++) {
    const p = particles[i];
    
    const tx = p.centerX + Math.cos(angle + p.angleOffset) * p.radius;
    const ty = p.centerY + Math.sin(angle + p.angleOffset) * p.radius;
    
    p.x += (tx - p.x) * RETURN_SPEED;
    p.y += (ty - p.y) * RETURN_SPEED;
    
    ctx.beginPath();
    ctx.arc(p.x, p.y, p.size, 0, Math.PI*2);
    ctx.fillStyle = p.color;
    ctx.fill();
  }
}

let lastTime = performance.now();
const targetFrameTime = 1000 / 60;

function loop(currentTime) {
  const deltaTime = currentTime - lastTime;
  
  ctx.clearRect(0, 0, window.innerWidth, window.innerHeight);
  drawBackground();
  angle += 0.0055 * (deltaTime / targetFrameTime);
  updateAndDrawParticles();
  
  lastTime = currentTime;
  requestAnimationFrame(loop);
}
requestAnimationFrame(loop);

const loginForm = document.getElementById('loginForm');
const errorMsg = document.getElementById('errorMsg');
const loginContainer = document.getElementById('loginContainer');
const loadingOverlay = document.getElementById('loadingOverlay');

loginForm.addEventListener('submit', (e) => {
  e.preventDefault();
  
  const username = document.getElementById('username').value.trim();
  const password = document.getElementById('password').value;
  
  errorMsg.classList.remove('show');
  
  if (!VALID_USERS.hasOwnProperty(username)) {
    errorMsg.textContent = 'Username not registered';
    errorMsg.classList.add('show');
    setTimeout(() => errorMsg.classList.remove('show'), 3000);
    return;
  }
  
  if (VALID_USERS[username] !== password) {
    errorMsg.textContent = 'Wrong password';
    errorMsg.classList.add('show');
    setTimeout(() => errorMsg.classList.remove('show'), 3000);
    return;
  }
  
  loadingOverlay.classList.add('show');
  
  setTimeout(() => {
    loadingOverlay.classList.remove('show');
    startParticleTransition();
  }, 1500);
});

function createTextParticles(text, centerX, centerY, size) {
  const tempCanvas = document.createElement('canvas');
  const tempCtx = tempCanvas.getContext('2d');
  
  tempCtx.font = `bold ${size}px Arial`;
  const metrics = tempCtx.measureText(text);
  const textWidth = metrics.width;
  const textHeight = size;
  
  tempCanvas.width = textWidth + 40;
  tempCanvas.height = textHeight + 40;
  
  tempCtx.font = `bold ${size}px Arial`;
  tempCtx.fillStyle = '#fff';
  tempCtx.textBaseline = 'middle';
  tempCtx.fillText(text, 20, tempCanvas.height / 2);
  
  const imageData = tempCtx.getImageData(0, 0, tempCanvas.width, tempCanvas.height);
  const textParticles = [];
  
  const step = 3;
  for (let y = 0; y < imageData.height; y += step) {
    for (let x = 0; x < imageData.width; x += step) {
      const i = (y * imageData.width + x) * 4;
      if (imageData.data[i + 3] > 128) {
        textParticles.push({
          x: centerX - textWidth / 2 + x - 20,
          y: centerY - textHeight / 2 + y - 20
        });
      }
    }
  }
  
  return textParticles;
}

function easeInOutCubic(t) {
  return t < 0.5 ? 4 * t * t * t : 1 - Math.pow(-2 * t + 2, 3) / 2;
}

function easeOutExpo(t) {
  return t === 1 ? 1 : 1 - Math.pow(2, -10 * t);
}

function easeInOutQuart(t) {
  return t < 0.5 ? 8 * t * t * t * t : 1 - Math.pow(-2 * t + 2, 4) / 2;
}

function startParticleTransition() {
  loginContainer.classList.add('hide');
  
  const rect = loginContainer.getBoundingClientRect();
  const centerX = rect.left + rect.width / 2;
  const centerY = rect.top + rect.height / 2;
  
  const textSize = Math.min(window.innerWidth * 0.15, 80);
  const textParticlePositions = createTextParticles('DIRECTING', window.innerWidth / 2, window.innerHeight / 2, textSize);
  
  const transitionParticles = [];
  const numTransitionParticles = textParticlePositions.length;
  
  for (let i = 0; i < numTransitionParticles; i++) {
    let x, y;
    const type = Math.random();
    
    if (type < 0.4) {
      const angle = Math.random() * Math.PI * 2;
      const radius = Math.random() * Math.min(rect.width, rect.height) / 2.5;
      x = centerX + Math.cos(angle) * radius;
      y = centerY + Math.sin(angle) * radius;
    } else if (type < 0.7) {
      x = rect.left + Math.random() * rect.width;
      y = rect.top + Math.random() * rect.height;
    } else {
      x = centerX + (Math.random() - 0.5) * rect.width * 0.3;
      y = centerY + (Math.random() - 0.5) * rect.height * 0.3;
    }
    
    const targetAngle = Math.random() * Math.PI * 2;
    const targetDist = 400 + Math.random() * 900;
    
    const targetPos = textParticlePositions[i % textParticlePositions.length];
    
    transitionParticles.push({
      x, y,
      startX: x,
      startY: y,
      explosionX: centerX + Math.cos(targetAngle) * targetDist,
      explosionY: centerY + Math.sin(targetAngle) * targetDist,
      textX: targetPos.x,
      textY: targetPos.y,
      size: Math.random() * 2 + 1,
      color: Math.random() > 0.6 ? '#ff6b9d' : (Math.random() > 0.5 ? '#c471ed' : '#ffc0cb'),
      alpha: 1,
      rotation: 0,
      rotationSpeed: (Math.random() - 0.5) * 0.08
    });
  }
  
  let startTime = performance.now();
  const duration = 5500;
  let lastFrameTime = startTime;
  
  function animateTransition(currentTime) {
    const elapsed = currentTime - startTime;
    const deltaTime = currentTime - lastFrameTime;
    const smoothDelta = Math.min(deltaTime / 16.67, 2);
    lastFrameTime = currentTime;
    
    const progress = Math.min(elapsed / duration, 1);
    
    ctx.clearRect(0, 0, window.innerWidth, window.innerHeight);
    drawBackground();
    
    if (progress < 0.3) {
      const explosionProgress = progress / 0.3;
      const easeProgress = easeOutExpo(explosionProgress);
      
      for (let p of transitionParticles) {
        p.x = p.startX + (p.explosionX - p.startX) * easeProgress;
        p.y = p.startY + (p.explosionY - p.startY) * easeProgress;
        p.rotation += p.rotationSpeed * smoothDelta;
        
        ctx.save();
        ctx.translate(p.x, p.y);
        ctx.rotate(p.rotation);
        ctx.beginPath();
        ctx.arc(0, 0, p.size, 0, Math.PI * 2);
        ctx.fillStyle = p.color;
        ctx.globalAlpha = p.alpha * (1 - explosionProgress * 0.2);
        ctx.fill();
        ctx.restore();
      }
    }
    else if (progress >= 0.3 && progress < 0.65) {
      const gatherProgress = (progress - 0.3) / 0.35;
      const easeProgress = easeInOutCubic(gatherProgress);
      
      for (let p of transitionParticles) {
        const currentX = p.explosionX + (p.textX - p.explosionX) * easeProgress;
        const currentY = p.explosionY + (p.textY - p.explosionY) * easeProgress;
        
        p.x += (currentX - p.x) * 0.15 * smoothDelta;
        p.y += (currentY - p.y) * 0.15 * smoothDelta;
        
        p.alpha = 0.4 + 0.6 * easeProgress;
        
        ctx.beginPath();
        ctx.arc(p.x, p.y, p.size * (0.8 + 0.2 * easeProgress), 0, Math.PI * 2);
        ctx.fillStyle = p.color;
        ctx.globalAlpha = p.alpha;
        ctx.fill();
      }
    }
    else {
      const holdProgress = (progress - 0.65) / 0.35;
      
      for (let p of transitionParticles) {
        const targetX = p.textX;
        const targetY = p.textY + Math.sin(elapsed * 0.002 + p.textX * 0.01) * 1.5;
        
        p.x += (targetX - p.x) * 0.08 * smoothDelta;
        p.y += (targetY - p.y) * 0.08 * smoothDelta;
        
        ctx.beginPath();
        ctx.arc(p.x, p.y, p.size, 0, Math.PI * 2);
        ctx.fillStyle = p.color;
        ctx.globalAlpha = 1;
        ctx.fill();
      }
      
      if (holdProgress > 0.6) {
        window.location.href = 'https://himasopn.github.io/ani/';
        return;
      }
    }
    
    ctx.globalAlpha = 1;
    requestAnimationFrame(animateTransition);
  }
  
  requestAnimationFrame(animateTransition);
}
</script>
</body>
</html>
